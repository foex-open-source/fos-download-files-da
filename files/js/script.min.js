

var FOS=window.FOS||{};FOS.utils=window.FOS.utils||{},function(e){var i={},n={},t={},o={};function a(i,t){var o=e("#preview-"+i),a=e("#iframe-"+i),d=e("#form-"+i);"function"==typeof n[i]&&(n[i](),delete n[i]),d&&d.remove(),t||(a&&a.remove(),o&&o.remove())}function d(e,n){return e.triggeringElement$,o[n]=30,i[n]=window.setInterval((function(){var d=function(e){var i=document.cookie.split(e+"=");if(2==i.length)return{name:e,value:i[1].split(";").shift()}}(n);(d&&d.name==n||0==o[n])&&(d&&(e.fileInfo=JSON.parse(d.value),t[n]=e.fileInfo),function(e,n){var t=e.previewMode?"fos-download-preview-complete":"fos-download-file-complete";a(n,e.previewMode),window.clearInterval(i[n]),d=n,void(document.cookie=encodeURIComponent(d)+"=deleted; expires="+new Date(0).toUTCString()),delete i[n],delete o[n],e.fileInfo&&(apex.event.trigger(document.body,t,e),delete e.fileInfo);var d;e.triggeringElement$}(e,n)),o[n]--}),1e3),n}FOS.utils.download=function(i,o,r){var l,p="FOS"+o.id+(new Date).getTime(),s=i.affectedElements,u=i.triggeringElement;function m(e,i){return e.previewMode?'<iframe id="'+e.iframeId+'" name="'+e.iframeId+'" width="100%" height="100%" style="min-width: 95%;height:100%;" scrolling="auto" class="fos-preview-mode u-hidden" onload="FOS.utils.download.'+i+'(this)"></iframe>':'<iframe id="'+e.iframeId+'" name="'+e.iframeId+'" class="u-hidden" onload="FOS.utils.download.'+i+'(this)"></iframe>'}l=e.extend({},o),apex.debug.info("FOS - Download File(s)",l),FOS.utils.download[p]=function(n){var t,o,d=!1,r={},s=n.contentWindow||n.contentDocument;try{if(l.previewMode&&function(e,i){Math.max(i.documentElement.clientWidth||0,e.innerWidth||0);var n="img{margin-left: auto; margin-right: auto; width: 50%; vertical-align: middle;height: auto;} span.fos-img-helper{display: inline-block;height: 100%;vertical-align: middle;width: 25%;}",t=i.head||i.getElementsByTagName("head")[0],o=i.body||i.getElementsByTagName("body")[0],a=i.getElementsByTagName("img").length>0,d=i.createElement("style"),r=i.createElement("span");r.classList.add("fos-img-helper"),t&&(t.append(d),d.type="text/css",d.styleSheet?d.styleSheet.cssText=n:d.appendChild(i.createTextNode(n)),a&&o.prepend(r))}(s,s.document),t=e.extend({},l),"about:blank"===s.document.location.href)return!1;try{o=s.document.getElementsByTagName("pre")[0].innerHTML,r=JSON.parse(o)}catch(e){t.response=s.document}t.error=r.message,t.error&&!t.suppressErrorMessages&&(apex.message.showErrors({type:"error",location:["page"],pageItem:void 0,message:t.error,unsafe:!1}),d=!0),a(p,l.previewMode),apex.event.trigger(document.body,"fos-download-file-error",t),"YES"!=l.previewDownload&&apex.da.resume(i.resumeCallback,d),delete FOS.utils.download[p]}catch(e){18==e.code&&s.parent.postMessage({iframeId:n.id})}},r instanceof Function&&r.call(i,l);var c,f,g,w,v={x01:p,x02:l.previewDownload},h=l.spinnerSettings;l.previewMode&&(l.token=d(l,p),v.x10=l.token),l.itemsToSubmit&&(v.pageItems=l.itemsToSubmit),h.showSpinner&&(h.spinnerElement=h.showSpinnerOnRegion?s:"body",f=h.spinnerElement,g=h.showSpinnerOverlay,w="body"==f,c=function(i){var n,t=apex.util.showSpinner(f,{fixed:w});return g&&(n=e('<div class="fos-region-overlay'+(w?"-fixed":"")+'"></div>').prependTo(f)),function(){n&&n.remove(),t.remove()}}),"function"==typeof c&&(n[p]=c.call(this)),apex.server.plugin(l.ajaxIdentifier,v,{dataType:"json",target:i.browserEvent.target}).done((function(n){var o,a,s,c,f,g,w;l.previewMode?function(n){var o=e("#"+n.previewId),a=e("#"+n.iframeId),d=[],l=n.previewOptions;r instanceof Function&&r.call(i,n),0===o.length&&(e(document.body).append('<div id="'+n.previewId+'">'+m(n,p)+"</div>"),a=e("#"+n.iframeId),o=e("#"+n.previewId)),a.removeClass("u-hidden"),e(window).on("message",(function(t){var o=t.originalEvent.data;o&&o.iframeId===n.iframeId&&(e(this).off(t),delete FOS.utils.download[p],apex.da.resume(i.resumeCallback,!1))})),o.on("dialogresize",(function(){var e=o.height(),i=o.width();o.children("iframe").width(i).height(e)})),l.showFileInfo&&d.push({text:" ",icon:"fa fa-info fos-dialog-file-info",click:function(i){var n;e(i.target).tooltip({items:i.target,content:(n=t[p],n?(l.fileInfoTpl||"<strong>Name:</strong> #NAME#<br /><strong>Size:</strong> #SIZE#<br /><strong>Mime Type:</strong> #MIME_TYPE#").replace(/\#NAME\#/,n.name).replace(/\#SIZE\#/,n.size).replace(/\#MIME_TYPE\#/,n.mimeType):l.loadingMsg||"The file information is still loading...."),position:{my:"center bottom",at:"center top-10"},classes:{"ui-tooltip":"fos-dialog-file-info-tooltip top ui-corner-all ui-widget-shadow"}}),e(i.target).tooltip("open")}}),l.showDownloadBtn&&d.push({text:"Download",icon:"fa fa-download",click:function(){FOS.utils.download(i,e.extend({},n,{previewMode:!1,previewDownload:"YES"}))},classes:{"ui-tooltip":"fos-dialog-file-download-btn u-hot ui-corner-all ui-widget-shadow"}}),o.dialog(e.extend({title:"File
Preview",classes:{"ui-dialog":"fos-file-preview-dialog"},height:"600",width:"720",modal:!0,autoOpen:!0,dialog:null,buttons:d},l||{})),o.css("overflow","hidden"),o.parent().find(".ui-button .fa").removeClass("ui-button-icon ui-icon"),a.attr("src",n.previewSrc)}(n.data):l.newWindow?(apex.navigation.openInNewWindow(n.data.previewSrc),apex.da.resume(i.resumeCallback,!1)):(o=n.data,w=!1,o.triggeringElement$=e(u),o.token=d(o,p),a='<form action="wwv_flow.show" method="post" enctype="multipart/form-data" id="'+(g=o).formId+'" target="'+g.iframeId+'" onload=""><input type="hidden" name="p_flow_id" value="'+g.appId+'" id="pFlowId2" /><input type="hidden" name="p_flow_step_id" value="'+g.pageId+'" id="pFlowStepId2" /><input type="hidden" name="p_instance" value="'+g.sessionId+'" id="pInstance2" /><input type="hidden" name="p_request" value="PLUGIN='+g.request+'" id="pRequest2" /><input type="hidden" name="p_debug" value="'+(g.debug||"")+'" id="pDebug2" /><input type="hidden" name="p_widget_name" value="'+(g.widgetName||"")+'" id="pWidgetName2" /><input type="hidden" name="p_widget_action" value="'+(g.action||"")+'" id="pWidgetAction2" /><input type="hidden" name="p_widget_action_mod" value="'+(g.actionMod||"")+'" id="pWidgetActionMod2" /><input type="hidden" name="x01" value="'+(g.x01||"")+'" id="x01" /><input type="hidden" name="x02" value="'+(g.previewDownload||"NO")+'" id="x02" /><input type="hidden" name="x03" value="'+(g.x03||"")+'" id="x03" /><input type="hidden" name="x04" value="'+(g.x04||"")+'" id="x04" /><input type="hidden" name="x05" value="'+(g.x05||"")+'" id="x05" /><input type="hidden" name="x06" value="'+(g.x06||"")+'" id="x06" /><input type="hidden" name="x07" value="'+(g.x07||"")+'" id="x07" /><input type="hidden" name="x08" value="'+(g.x08||"")+'" id="x08" /><input type="hidden" name="x09" value="'+(g.x09||"")+'" id="x09" /><input type="hidden" name="x10" value="'+(g.token||"")+'" id="x10" /><input type="hidden" name="f10" value="'+(g.f10||"")+'" id="f10" /></form>',s=m(o,p),e("#"+o.formId).length&&e("#"+o.formId).remove(),c=e(document.body).append(a)&&e("#"+o.formId)[0],0===(f=e("#"+o.iframeId)).length?e(document.body).append(s):f.attr("onload","FOS.utils.download."+p+"(this)"),c&&c.submit?c.submit():w=!0,"YES"!=l.previewDownload&&apex.da.resume(i.resumeCallback,w))})).catch((function(e){l.error=e,a(p,l.previewMode),apex.event.trigger(document.body,"fos-download-file-error",l)}))}}(apex.jQuery);
//# sourceMappingURL=script.js.map



